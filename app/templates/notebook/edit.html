{% extends 'columns.html' %}
{% block title %} | Edit Post {% endblock %}

{% block page_name %}Edit Post{% endblock %}
{% block content %}
  <form method="POST" class="post-form">
    {% csrf_token %}
    <div class="field">
      <label for="id_title">Title</label>
      <div class="control">{{ form.title }}</div>
    </div>
    <div class="field">
      <label for="id_body">Post</label>
      <div class="control">{{ form.body }}</div>
    </div>

    <tag-form curr-tags="{{form.categories.value}}"></tag-form>

    <div class="field">
      <div class="control">
        <button type="submit" class="button is-info">Submit</button>
      </div>
    </div>
    
    <delete-btn inline-template>
      <div class="field">
        <div class="control">
          <a class="button is-danger" v-on:click="click">
            <span class="icon is-small"><i class="fa fa-trash"></i></span>
            <span>Delete</span>
          </a>

          <div v-if="clicked"> 
            <hr/>
            <p> Are you sure you want to delete this post?</p> 
            <a href="{% url 'delete-post' id=pk %}" class="button is-danger">Yes, delete this post</a>
            <a class="button is-info" v-on:click="clicked = false">No, I changed my mind</a>
        </div>
      </div>
    </delete-btn>
  </form>
{% endblock %}
  
